{"version":3,"sources":["../../../src/plugins/storage/cookie.js"],"names":["Cookie","params","init","Object","assign","path","expires","document","cookie","split","map","value","reduce","acc","undefined","trim","decodeURIComponent","forEach","key","parser","JSON","parse","error","object","date","Date","setTime","stringify","encodeURIComponent","toUTCString","Manager"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;;;IAEqBA,M;;;AACnB,oBAAyB;AAAA,QAAbC,MAAa,uEAAJ,EAAI;;AAAA;;AAAA;;AAEvB,UAAKC,IAAL,CAAUD,MAAV;AAFuB;AAGxB;;AAED;;;;;;;;2BAIkB;AAAA,UAAbA,MAAa,uEAAJ,EAAI;;AAChB,WAAKA,MAAL,GAAcE,OAAOC,MAAP,CAAc;AAC1BC,cAAM,GADoB,EACZ;AACdC,iBAAS,MAFiB,CAET;AAFS,OAAd,EAGXL,MAHW,CAAd;AAID;;AAED;;;;;;;6BAIS;AACP,UAAIM,SAASC,MAAT,KAAoB,EAAxB,EAA4B;AAC1B,eAAO,EAAP;AACD;AACD,aAAOD,SAASC,MAAT,CACJC,KADI,CACE,IADF,EAEJC,GAFI,CAEA,UAACC,KAAD;AAAA,eAAWA,MAAMF,KAAN,CAAY,GAAZ,CAAX;AAAA,OAFA,EAGJG,MAHI,CAGG,UAACC,GAAD,EAAMF,KAAN,EAAgB;AACtB,YAAIA,MAAM,CAAN,MAAaG,SAAb,IAA0BH,MAAM,CAAN,MAAa,WAAvC,IAAsDA,MAAM,CAAN,MAAa,EAAvE,EAA2E;AACzEA,gBAAM,CAAN,IAAYA,MAAM,CAAN,MAAaG,SAAd,GAA2BH,MAAM,CAAN,EAASI,IAAT,EAA3B,GAA6C,EAAxD;AACAF,cAAIG,mBAAmBL,MAAM,CAAN,EAASI,IAAT,EAAnB,CAAJ,IAA2CC,mBAAmBL,MAAM,CAAN,CAAnB,CAA3C;AACD;AACD,eAAOE,GAAP;AACD,OATI,EASF,EATE,CAAP;AAUD;;AAED;;;;;;4BAGQ;AACNN,eAASC,MAAT,CAAgBC,KAAhB,CAAsB,GAAtB,EAA2BQ,OAA3B,CAAmC,UAACT,MAAD,EAAY;AAC7C,YAAIA,WAAW,EAAf,EAAmB;AACjBD,mBAASC,MAAT,GAAkB,wBAAWA,MAAX,CAAlB;AACD;AACF,OAJD;AAKD;;AAED;;;;;;;;wBAKIU,G,EAAK;AACP,UAAMP,QAAQ,KAAKQ,MAAL,GAAcD,GAAd,KAAsBJ,SAApC;AACA,UAAI;AACF,eAAOM,KAAKC,KAAL,CAAWV,KAAX,CAAP;AACD,OAFD,CAEE,OAAOW,KAAP,EAAc;AACd,eAAOX,KAAP;AACD;AACF;;AAED;;;;;;;;wBAKIO,G,EAAKK,M,EAAQ;AACf,UAAMC,OAAO,IAAIC,IAAJ,EAAb;AACAD,WAAKE,OAAL,CAAa,CAAEF,IAAF,GAAU,KAAKvB,MAAL,CAAYK,OAAZ,GAAsB,EAAtB,GAA2B,IAAlD;;AAEAiB,eAAU,OAAOA,MAAP,KAAkB,QAAnB,GACLA,MADK,GAELH,KAAKO,SAAL,CAAeJ,MAAf,CAFJ;;AAIAhB,eAASC,MAAT,GAAqBoB,mBAAmBV,GAAnB,CAArB,SAAgDF,mBAC9CO,MAD8C,CAAhD,cAEU,KAAKtB,MAAL,CAAYI,IAFtB,iBAEsCmB,KAAKK,WAAL,EAFtC;AAGD;;AAED;;;;;;;0BAIMX,G,EAAK;AACTX,eAASC,MAAT,GAAqBoB,mBAAmBV,GAAnB,CAArB,kBAAyD,IAAIO,IAAJ,GAAWI,WAAX,EAAzD;AACD;;;;EAtFiCC,iB;;kBAAf9B,M","file":"cookie.js","sourcesContent":["import Manager from './manager'\r\nimport { setExpires } from '../../utils/cookie'\r\n\r\nexport default class Cookie extends Manager {\r\n  constructor(params = {}) {\r\n    super()\r\n    this.init(params)\r\n  }\r\n\r\n  /**\r\n   * Init settings on cookie\r\n   * @param {Object} params\r\n   */\r\n  init(params = {}) {\r\n    this.params = Object.assign({\r\n      path: '/',    // path of cookie\r\n      expires: 525600  // 365 days = 525600 minutes\r\n    }, params)\r\n  }\r\n\r\n  /**\r\n   * Get cookie object\r\n   * @return {Object}\r\n   */\r\n  parser() {\r\n    if (document.cookie === '') {\r\n      return {}\r\n    }\r\n    return document.cookie\r\n      .split('; ')\r\n      .map((value) => value.split('='))\r\n      .reduce((acc, value) => {\r\n        if (value[0] !== undefined && value[0] !== 'undefined' && value[0] !== '') {\r\n          value[1] = (value[1] !== undefined) ? value[1].trim() : ''\r\n          acc[decodeURIComponent(value[0].trim())] = decodeURIComponent(value[1])\r\n        }\r\n        return acc\r\n      }, {})\r\n  }\r\n\r\n  /**\r\n   * Delete all values present in the cookie\r\n   */\r\n  clear() {\r\n    document.cookie.split(';').forEach((cookie) => {\r\n      if (cookie !== '') {\r\n        document.cookie = setExpires(cookie)\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get an item from its key\r\n   * @param {String} key\r\n   * @returns {Object|String|undefined}\r\n   */\r\n  get(key) {\r\n    const value = this.parser()[key] || undefined\r\n    try {\r\n      return JSON.parse(value)\r\n    } catch (error) {\r\n      return value\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add an item from its key and value\r\n   * @param {String} key\r\n   * @param {*} object\r\n   */\r\n  set(key, object) {\r\n    const date = new Date()\r\n    date.setTime(+ date + (this.params.expires * 60 * 1000))\r\n\r\n    object = (typeof object === 'string')\r\n      ? object\r\n      : JSON.stringify(object)\r\n\r\n    document.cookie = `${encodeURIComponent(key)}=${decodeURIComponent(\r\n      object\r\n    )};path=${this.params.path};expires=${date.toUTCString()}`\r\n  }\r\n\r\n  /**\r\n   * Delete an item from its key\r\n   * @param {String} key\r\n   */\r\n  unset(key) {\r\n    document.cookie = `${encodeURIComponent(key)}=;expires=${new Date().toUTCString()}`\r\n  }\r\n}"]}